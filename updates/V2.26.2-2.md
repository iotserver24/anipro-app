# ğŸ¬ AniSurge v2.26.2-2 - Server Change UX Improvement & SoftSub Fix

## âœ¨ What's New

### ğŸš€ **Smooth Server Switching**
- **No more full page reloads** when changing between SoftSub, Zen, and HardSub servers
- **Individual server button loading indicators** instead of page-wide loading skeleton
- **Preserved video position** when switching servers - your progress is maintained

### ğŸ”§ **SoftSub Server Fix**
- **Fixed SoftSub server loading issues** that were preventing video playback
- **Implemented iframe-based wrapper** for better compatibility and stability
- **Resolved episode ID parsing** for both old and new URL formats

### ğŸ¯ **Enhanced User Experience**
- **Faster server switching** - only the video player updates, not the entire page
- **Better visual feedback** - loading spinners appear only on the selected server button
- **Seamless transitions** - page content remains visible during server changes

## ğŸ”§ Technical Changes

### Modified `fetchEpisodeData` Function
- Added `isServerChange` parameter to differentiate between initial loads and server switches
- Main loading state only triggers for initial page loads, not server changes
- Proper state management for `isChangingServer` indicator

### Updated Server Change Logic
- `useEffect` now passes `isServerChange: true` when switching servers
- `handleServerChange` function streamlined to rely on `useEffect` for data fetching
- Retry functionality updated to maintain proper loading states

### SoftSub Implementation
- **New iframe-based wrapper URL**: `https://anisurge.me/softsub-player/`
- **Enhanced episode ID parsing** for both `$episode$` and `$ep=` formats
- **Category support** for both sub and dub content
- **Resume position integration** with `start_at` parameter

### Fixed TypeScript Issues
- Resolved shimmer animation type errors
- Added proper type assertions for API response handling

## ğŸ® How It Works

1. **Before**: Changing servers would show a full-page loading skeleton
2. **After**: Only the selected server button shows a loading spinner while the page content remains visible
3. **Position Preservation**: Your current video position is automatically saved and restored when switching servers

## âš ï¸ **Important Disclaimer**

### SoftSub Server Notice
- **New server implementation** - We've switched to a new SoftSub server for better performance
- **Faster loading times** - The new server loads content significantly faster
- **âš ï¸ Resume position limitation** - Currently, the new SoftSub server **does not support resuming from where you left off**
- **Work in progress** - Resume functionality will be restored in a future update
- **Alternative servers** - Zen and HardSub servers still support full resume functionality

## User Impact

- **Faster navigation** between different streaming servers
- **Better visual continuity** - no jarring page reloads
- **Improved usability** - users can see episode information and controls while servers load
- **Maintained progress** - no need to seek back to your position after server changes (except SoftSub)
- **Reliable SoftSub playback** - fixed loading issues that were preventing video playback

---

*This update significantly improves the streaming experience by making server switching feel instant and seamless, while also fixing the SoftSub server issues!* ğŸ‰

**Note**: If you need resume functionality, please use Zen or HardSub servers until the SoftSub resume feature is restored. 